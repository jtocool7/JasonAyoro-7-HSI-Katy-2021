<style>
  #start{
    position:absolute;
    top:100px;
    left:300px;
    border-radius: 5px;
    border: 1px solid;
  }
  
  #stop{
     position:absolute;
    top:100px;
    left:600px;
    border-radius: 5px;
    border: 1px solid;
  }
  
  #currentTime{
    position:absolute;
    top:500px;
  }
  

  
  
</style>

<button id=start>Start Recording</button>
<button id=stop >Stop Recording</button>
<audio id=aud1 src="" controls></audio>
<audio id= aud2 src="" controls></audio>
<audio id= aud3 src="" controls></audio>
<input id=currentTime type="range" value = 0 max = 100>
<script>
var audfrof = 1;
var url1 = true;
var url2 = false;
var url3 = false;
var check1st = false;
const stop = document.getElementById('stop');
var audioChunks = [];
navigator.mediaDevices.getUserMedia({ audio: true })
  .then(stream => {
    const mediaRecorder = new MediaRecorder(stream);
    
    
   
    
    start.addEventListener('click',function(){
     mediaRecorder.start();
    console.log("recording has started");
     mediaRecorder.addEventListener("dataavailable", event => {
      audioChunks.push(event.data);
    });
    audioChunks = [];
    start.disabled = true;
    stop.disabled = false;
    if(check1st == true){
    audfrof += 1;
    }
    if(audfrof == 2){
    url2 = true;
    url1 = false
    }
    if(audfrof == 3){
    url3 = true;
    url2 = false
    }
    if(audfrof > 3){
    audfrof = 1;
    }
    
   
    })
    
    
    
    
    stop.addEventListener('click',function(){
    start.disabled = false;
    stop.disabled = false;
    mediaRecorder.stop();
    console.log("recording has stoped");
    })

    mediaRecorder.addEventListener("stop", () => {
      const audioBlob = new Blob(audioChunks);
      
      const audioUrl = URL.createObjectURL(audioBlob);
      const audioUrl2 = URL.createObjectURL(audioBlob);
      const audioUrl3 = URL.createObjectURL(audioBlob);
      if(audfrof == 1){
      aud1.src = audioUrl;
      check1st = true;
      audioChunks = [];
      }
      if(audfrof == 2){
      audioChunks = [];
      aud2.src = audioUrl2;
      
     
      }
      if(audfrof == 3){
      audioChunks = [];
      aud3.src = audioUrl3;
      
      
      }
      
    });
    
    currentTime.addEventListener('change', function(){
aud1.currentTime = currentTime.max / currentTime.val / 100;
aud1.play()
})
    
    function loop(){
    requestAnimationFrame(loop);
    var dur = aud1.duration;
    
    //console.log(dur);
    /*if (aud1.duration > 0 && !aud1.paused) {

    currentTime.value = aud1.currentTime / aud1.duration * 100;

}*/




//if (currentTime.value) {

  //  aud1.currentTime = currentTime.value / 100;
    //aud1.play()

//}
    console.log(aud1.currentTime)
    //console.log(currentTime.value);
    }
   loop(); 
  });
  
  
</script>
